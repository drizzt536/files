function b(o){(o=o?.toLowerCase?.())?.startsWith?.("image/")&&(o=o.slice(6));switch(o){case"png":default:return"image/png";case"jpeg":case"jfif":case"jpg":return"image/jpeg";case"webp":return"image/webp"}}var c=function(o){if(o instanceof Image)return function(o){const a=document.createElement("canvas");return a.width=o.naturalWidth,a.height=o.naturalHeight,a.getContext("2d").drawImage(o,0,0),a}(o);if(o instanceof ImageData)return function(o){const a=document.createElement("canvas");return a.width=o.width,a.height=o.height,a.getContext("2d").putImageData(o,0,0),a}(o);if(o instanceof HTMLCanvasElement)return o;if(o instanceof"string")throw Error`cannot convert data URI to canvas`;throw Error`cannot convert unknown format to canvas.`};function d(o,a){return"string"==typeof o?o:c(o).toDataURL(b(a))}function f(o,a,n){const e=d(o,n),t=document.createElement("a");t.href=e,t.download=(a??`download.${b(n).slice(6)}`).toString(),t.click()}function p(o,a){f(o,a,"png")}function j(o,a){f(o,a,"jpg")}function J(o,a){f(o,a,"jpeg")}function w(o,a){f(o,a,"webp")}f.png=p,f.jpg=j,f.jpeg=J,f.webp=w;const E={download:f,downloadPNG:p,downloadJPG:j,downloadJPEG:J,downloadWEBP:w,convertToCanvas:c,dataURI:d};"undefined"!=typeof module?module.exports=E:globalThis.imageDownload=E;
