\documentclass{standalone}

% magick -density 600 circuit.pdf -quality 100 circuit.png
% inkscape circuit.pdf -n 1 -o circuit.svg

\usepackage[american]{circuitikz}
\usepackage[dvipsnames]{xcolor}

\definecolor{lightgray}{RGB}{170, 170, 170}
\definecolor{dullorange}{RGB}{210, 140, 40}

\color{lightgray}
\pagecolor{black}

% NOTE: height 1cm
\newcommand \upswitch [3] {
	\begin{scope}[shift={(#1, #2)}]
		\ctikzset{nodes width=0.03}

		\draw [#3] (0, 0.75) -- (0, 1);
		\draw [OliveGreen] (0, 0) -- (0, 0.25);

		\draw (0, 0.25) to[nos, *-*] (0, 0.75);
	\end{scope}
}
\newcommand \rightswitch [3] {
	\begin{scope}[shift={(#1, #2)}]
		\ctikzset{nodes width=0.03}

		\draw [#3] (0.75, 0) -- (1, 0);
		\draw [OliveGreen] (0, 0) -- (0.25, 0);

		\draw (0.25, 0) to[nos, *-*] (0.75, 0);
	\end{scope}
}

\newcommand \ground [2] {\node at (#1, #2) [ground, OliveGreen, scale=0.75] {};}

\begin{document}
\begin{circuitikz}
	% diagram margins (0.1cm)
	\node at (0.9, -1.1) {};
	\node at (14.1, 12.1) {};

	\draw (8, 0) rectangle (14, 9.50); % Arduino border rectangle

	\node at (1, 11.5) [right, align=left] {Pins 2, 3, 5 are on port E.\\for mode selection};

	% joystick module
	\begin{scope}[shift={(6.5, 10.5)}]
		\draw (0, 0) rectangle (4.5, 1.5) {};

		\node at (2.25, 1.5) [below, align=center] {Dual potentiometer\\Joystick module};

		\node at (0.75, 0) [circ, OliveGreen, label=above:{GND}] {};
		\node at (1.50, 0) [circ, red, label=above:{5V}] {};
		\node at (2.25, 0) [circ, Goldenrod, label=above:{X}] {};
		\node at (3.00, 0) [circ, Goldenrod, label=above:{Y}] {};
		\node at (3.75, 0) [circ, Goldenrod, label=above:{SW}] {};
	\end{scope}

	% connections between the Arduino and the joystick module.
	\draw [Goldenrod] (8.75, 10.5) |- (10, 9.75) -- (10, 9.25);
	\draw [Goldenrod] (9.5, 10.5) |- (10.75, 10) -- (10.75, 9.25);

	\draw [Goldenrod] (8.125, 8.25) -- (8.25, 8.25) |- (8.375, 10.25) to[short, crossing] (9.125, 10.25)
		to[short, crossing] (9.875, 10.25) -| (10.25, 10.5);

	% connections between the Arduino and MAX7219
	\draw [RoyalPurple] (8.5, 7.25) |- (5, 7.6); % DIN
	\draw [RoyalPurple] (8.5, 6.75) |- (5, 7.1); % CS
	\draw [RoyalPurple] (8.5, 6.25) |- (5, 6.6); % CLK

	% connections between the Arduino and the top layer of switches.
	\draw [dullorange] (8.125, 6.75) |- (5.25, 6.9)
		to[short, crossing] (5.25, 6.3) |- (1.4, 6.15) -- (1.4, 4);

	\draw [dullorange] (8.125, 6.25) |- (5.5, 6.4) |- (1.9, 5.9) -- (1.9, 4);
	\draw [dullorange] (8.5, 5.75) |- (5.75, 6.1) |- (2.4, 5.65) -- (2.4, 4);
	\draw [dullorange] (8.125, 5.75)|- (6, 5.9) |- (2.9, 5.4) -- (2.9, 4);

	\draw [MidnightBlue] (8.125, 4.25) |- (7.15, 4.4) |- (3.9, 4.9) -- (3.9, 4);
	\draw [MidnightBlue] (8.125, 3.75) |- (6.65, 3.9) |- (4.9, 4.4) -- (4.9, 4);
	\draw [MidnightBlue] (8.125, 3.25) |- (6.15, 3.4) |- (5.9, 4) -- (5.9, 3.75);
	\draw [MidnightBlue] (8.5, 4.25) |- (7.4, 4.6) |- (3.4, 5.15) -- (3.4, 4);
	\draw [MidnightBlue] (8.5, 3.75) |- (6.9, 4.1) |- (4.4, 4.65) -- (4.4, 4);
	\draw [MidnightBlue] (8.5, 3.25) |- (6.4, 3.6) |- (5.4, 4.15) -- (5.4, 4);

	% connections between the Arduino and the bottom layer of switches
	\draw [MidnightBlue] (8.5, 2.75) |- (6.15, 3.1) |- (1.4, 2.8) -- (1.4, 1);
	\draw [MidnightBlue] (8.125, 2.75) |- (6.4, 2.9) |- (1.9, 2.6) -- (1.9, 1);

	\draw [BrickRed] (8.5, 2.25) |- (6.65, 2.6) |- (2.4, 2.4) -- (2.4, 1);
	\draw [BrickRed] (8.5, 1.75) |- (7.10, 2.1) |- (3.4, 2.0) -- (3.4, 1);
	\draw [BrickRed] (8.5, 1.25) |- (4.4, 1.6) -- (4.4, 1);
	\draw [BrickRed] (8.5, 0.75) |- (7.4, 1.1) |- (5.4, 1.2) -- (5.4, 1);
	\draw [BrickRed] (8.125, 2.25) |- (6.9, 2.4) |- (2.9, 2.2) -- (2.9, 1);
	\draw [BrickRed] (8.125, 1.75) |- (7.3, 1.9) |- (3.9, 1.8) -- (3.9, 1);
	\draw [BrickRed] (8.125, 1.25) |- (4.9, 1.4) -- (4.9, 1);
	\draw [BrickRed] (8.125, 0.75) |- (7.2, 0.9) |- (5.9, 1) -- (5.9, 0.75);

	% connections between the Arduino and the state machine switches
	\draw [SkyBlue] (2, -0.3) -| (10.000, 0.25);
	\draw [SkyBlue] (2, -0.65) -| (10.375, 0.25);
	\draw [SkyBlue] (2, -1) -| (11.125, 0.25);

	% ground
	\draw [OliveGreen] (5.9, 3.25) |- (1, 3) |- (6.15, 0) |- (6.4, 0.75) -- (6.4, 0.65);
	\draw [OliveGreen] (1, 0) |- (1.1, -1);
	\ground {6.4} {0.75}

	\draw [OliveGreen] (5, 8.1) -- (5.5, 8.1) -- (5.5, 8);
	\ground {5.5} {8.1}

	\draw [OliveGreen] (11.75, 9.25) -- (11.75, 10) -- (11.25, 10) -- (11.25, 9.65);
	\ground {11.25} {10}

	\draw [OliveGreen] (12.75, 9.25) -- (12.75, 10) -- (12.25, 10) -- (12.25, 9.65);
	\ground {12.25} {10}

	\draw [OliveGreen] (13, 0.25) -- (13, 0);
	\ground {13} {0}

	\draw [OliveGreen] (7.25, 10.5) -- (7.25, 10.4);
	\ground {7.25} {10.4}

	% Vcc
	\begin{scope}[red]
		\draw (13.75, 9.25) -- (13.75, 9.5);
		\node at (13.75, 9.5) [vcc] {};

		\draw (5, 8.6) -| (5.5, 8.7);
		\node at (5.5, 8.7) [vcc] {};

		\draw (8.125, 0.25) |- (7, 0.4) -- (7, 0.5);
		\node at (7, 0.4) [vcc] {};

		\draw (8.0, 10.5) |- (7.625, 10) -- (7.625, 10.1);
		\node at (7.625, 10) [vcc] {};
	\end{scope}

	% MAX7219
	\begin{scope}[shift={(2, 6.35)}]
		\draw (0, 0) rectangle (3, 2.5);
		\node at (1.5, 2.5) [above, align=center, scale=0.95] {MAX7219\,\&\,1088AS};

		\node at (0, 2.25) [ocirc, fill=black] {};  \node at (3, 2.25) [circ, red] {};
		\node at (0, 1.75) [ocirc, fill=black] {};  \node at (3, 1.75) [circ, OliveGreen] {};
		\node at (0, 1.25) [ocirc, fill=black] {};  \node at (3, 1.25) [circ] {};
		\node at (0, 0.75) [ocirc, fill=black] {};  \node at (3, 0.75) [circ] {};
		\node at (0, 0.25) [ocirc, fill=black] {};  \node at (3, 0.25) [circ] {};

		% row 1 (top)
		\node at (0, 2.25) [right, align=left] {$\rm V_{CC}$}; % out
		\node at (3, 2.25) [left, align=right] {$\rm V_{CC}$}; % in

		% row 2
		\node at (0, 1.75) [right, align=left] {GND}; % out
		\node at (3, 1.75) [left, align=right] {GND}; % in

		% row 3
		\node at (0, 1.25) [right, align=left] {$\rm D_{out}$}; % out
		\node at (3, 1.25) [left, align=right] {$\rm D_{in}$};  % in

		% row 4
		\node at (0, 0.75) [right, align=left] {CS}; % out
		\node at (3, 0.75) [left, align=right] {CS}; % in

		% row 5 (bottom)
		\node at (0, 0.25) [right, align=left] {CLK}; % out
		\node at (3, 0.25) [left, align=right] {CLK}; % in
	\end{scope}

	% Arduino interals
	\begin{scope}[shift={(8, 0)}]
		\node at (2, 9.25) [circ, Goldenrod, label=below:{A15}] {};
		\node at (2.75, 9.25) [circ, Goldenrod, label=below:{A14}] {};

		\node at (3.75, 9.25) [circ, OliveGreen, label=below:{GND}] {};
		\node at (4.75, 9.25) [circ, OliveGreen, label=below:{GND}] {};
		\node at (5.75, 9.25) [circ, red, label=below:{5V}] {};

		\node at (0.125, 8.25) [circ, Goldenrod, label=left:{53}] {};
		\node at (0.5, 8.25) [circ, label=right:{52}] {};

		\node at (4, 7.5) [above, align=center] {Arduino Mega 2560};

		\node at (0.125, 7.75) [circ, label=left:{51}] {};
		\node at (0.5, 7.75) [circ, label=right:{50}] {};

		\node at (0.125, 7.25) [circ, label=left:{49}] {};
		\node at (0.5, 7.25) [circ, RoyalPurple, label=right:{48}] {};

		\node at (0.125, 6.75) [circ, dullorange, label=left:{47}] {};
		\node at (0.5, 6.75) [circ, RoyalPurple, label=right:{46}] {};

		\node at (1.25, 6.45) [right, align=center] {Port L\\SPI \& Corner toggles};

		\node at (0.125, 6.25) [circ, dullorange, label=left:{45}] {};
		\node at (0.5, 6.25) [circ, RoyalPurple, label=right:{44}] {};

		\node at (0.125, 5.75) [circ, dullorange, label=left:{43}] {};
		\node at (0.5, 5.75) [circ, dullorange, label=right:{42}] {};

		\node at (0.125, 5.25) [circ, label=left:{41}] {};
		\node at (0.5, 5.25) [circ, label=right:{40}] {};

		\node at (3.5, 4.5) [above, align=center] {All digital GPIO pins are\\input pullup except purple.};

		\node at (0.125, 4.75) [circ, label=left:{39}] {};
		\node at (0.5, 4.75) [circ, label=right:{38}] {};

		\node at (0.125, 4.25) [circ, MidnightBlue, label=left:{37}] {};
		\node at (0.5, 4.25) [circ, MidnightBlue, label=right:{36}] {};

		\node at (0.125, 3.75) [circ, MidnightBlue, label=left:{35}] {};
		\node at (0.5, 3.75) [circ, MidnightBlue, label=right:{34}] {};

		\node at (1.25, 3.45) [right, align=center] {Port C\\Column toggles};

		\node at (0.125, 3.25) [circ, MidnightBlue, label=left:{33}] {};
		\node at (0.5, 3.25) [circ, MidnightBlue, label=right:{32}] {};

		\node at (0.125, 2.75) [circ, MidnightBlue, label=left:{31}] {};
		\node at (0.5, 2.75) [circ, MidnightBlue, label=right:{30}] {};

		\node at (0.125, 2.25) [circ, BrickRed, label=left:{29}] {};
		\node at (0.5, 2.25) [circ, BrickRed, label=right:{28}] {};

		\node at (0.125, 1.75) [circ, BrickRed, label=left:{27}] {};
		\node at (0.5, 1.75) [circ, BrickRed, label=right:{26}] {};

		\node at (1.25, 1.45) [right, align=center] {Port A\\Row toggles};

		\node at (0.125, 1.25) [circ, BrickRed, label=left:{25}] {};
		\node at (0.5, 1.25) [circ, BrickRed, label=right:{24}] {};

		\node at (0.125, 0.75) [circ, BrickRed, label=left:{23}] {};
		\node at (0.5, 0.75) [circ, BrickRed, label=right:{22}] {};

		\node at (0.125, 0.25) [circ, red, label=left:{5V}] {};
		\node at (0.5, 0.25) [circ, label=right:{5V}] {};

		\node at (2.000, 0.25) [circ, SkyBlue, label=above:{2}] {};
		\node at (2.375, 0.25) [circ, SkyBlue, label=above:{3}] {};
		\node at (3.125, 0.25) [circ, SkyBlue, label=above:{5}] {};
		\node at (5.000, 0.25) [circ, OliveGreen, label=above:{GND}] {};
	\end{scope}

	% toggle switches
	\begin{scope}[shift={(1.4, 0)}]
		% top layer
		\upswitch {0.0} {3} {dullorange}
		\upswitch {0.5} {3} {dullorange}
		\upswitch {1.0} {3} {dullorange}
		\upswitch {1.5} {3} {dullorange}
		\upswitch {2.0} {3} {MidnightBlue}
		\upswitch {2.5} {3} {MidnightBlue}
		\upswitch {3.0} {3} {MidnightBlue}
		\upswitch {3.5} {3} {MidnightBlue}
		\upswitch {4.0} {3} {MidnightBlue}
		\upswitch {4.5} {3} {MidnightBlue}

		% bottom layer
		\upswitch {0.0} {0} {MidnightBlue}
		\upswitch {0.5} {0} {MidnightBlue}
		\upswitch {1.0} {0} {BrickRed}
		\upswitch {1.5} {0} {BrickRed}
		\upswitch {2.0} {0} {BrickRed}
		\upswitch {2.5} {0} {BrickRed}
		\upswitch {3.0} {0} {BrickRed}
		\upswitch {3.5} {0} {BrickRed}
		\upswitch {4.0} {0} {BrickRed}
		\upswitch {4.5} {0} {BrickRed}
	\end{scope}

	% state machine switches
	\rightswitch {1} {-0.3} {SkyBlue}
	\rightswitch {1} {-0.65} {SkyBlue}
	\rightswitch {1} {-1} {SkyBlue}
\end{circuitikz}
\end{document}
